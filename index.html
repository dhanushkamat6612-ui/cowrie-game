<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cowrie Game</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#f7efe3;
  display:flex;
  flex-direction:column;
  align-items:center;
}

h2{margin:10px}

#board{
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  grid-template-rows: repeat(7, 1fr);
  width:90vmin;
  height:90vmin;
  border:6px solid #4b2e1e;
  background:#fff8cc;
}

.cell{
  border:1px solid #4b2e1e;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
}

.center{
  background:#ffd400;
  border:3px solid #7a5a00;
}

.safe{ background:#b6e0b6; }
.inner{ background:#e9f5ea; }

.coin{
  width:60%;
  height:60%;
  border-radius:50%;
  position:absolute;
}

.red{ background:red; }
.blue{ background:#0077ff; }

#ui{
  margin:10px;
  text-align:center;
}

button{
  padding:12px 20px;
  border:none;
  border-radius:20px;
  background:#d32f2f;
  color:white;
  font-size:16px;
}
</style>
</head>

<body>

<h2>Cowrie Game</h2>

<div id="ui">
  <div id="turn">RED TURN</div>
  <div id="roll">Roll: -</div>
  <button onclick="toss()">Toss Cowries</button>
</div>

<div id="board"></div>

<script>
// ===== GRID =====
const board = document.getElementById("board");
const cells = [];

for(let i=0;i<49;i++){
  const d=document.createElement("div");
  d.className="cell";
  board.appendChild(d);
  cells.push(d);
}

// ===== CENTER =====
cells[24].classList.add("center");

// ===== INNER ZONE =====
const innerCells = [17,18,19,23,25,29,30,31];
innerCells.forEach(i=>cells[i].classList.add("inner"));
[16,22,26,32].forEach(i=>cells[i].classList.add("safe"));

// ===== COINS =====
const redCoin=document.createElement("div");
redCoin.className="coin red";
cells[3].appendChild(redCoin);

const blueCoin=document.createElement("div");
blueCoin.className="coin blue";
cells[45].appendChild(blueCoin);

// ===== PATH SYSTEM =====

// Outer ring path (clockwise)
const outerPath = [
0,1,2,3,4,5,6,
13,20,27,34,41,48,
47,46,45,44,43,42,
35,28,21,14,7
];

// ===== HOUSE ENTRIES (unique) =====
const houseEntry = {
  red: 18,    // top entry
  green: 25,  // right entry
  blue: 30,   // bottom entry
  yellow: 23  // left entry
};

// ===== INNER PATHS (unique per house) =====
const innerPaths = {
  red:    [18,19,25,31,30,29,23,17,24],
  green:  [25,31,30,29,23,17,18,19,24],
  blue:   [30,29,23,17,18,19,25,31,24],
  yellow: [23,17,18,19,25,31,30,29,24]
};

// ===== GAME STATE =====
let turn="red";
let positions={
  red: outerPath.indexOf(3),
  blue: outerPath.indexOf(45)
};

// ===== TOSS =====
function toss(){
  const roll = Math.floor(Math.random()*4)+1;
  document.getElementById("roll").innerText="Roll: "+roll;
  move(turn,roll);
}

// ===== MOVE =====
function move(color,steps){
  let path=[];
  let pos = positions[color];

  // still on outer path
  if(pos+steps < outerPath.length){
    for(let i=1;i<=steps;i++){
      path.push( outerPath[pos+i] );
    }
    positions[color]+=steps;
  }else{
    // enter house
    const remain = (pos+steps) - outerPath.length;

    const entry = houseEntry[color];
    path.push(entry);

    const inner = innerPaths[color];

    for(let i=0;i<remain && i<inner.length;i++){
      path.push(inner[i]);
    }

    positions[color]=outerPath.length;
  }

  animate(color,path);
}

// ===== ANIMATE =====
function animate(color,path){
  let coin = color==="red"?redCoin:blueCoin;
  let i=0;

  function step(){
    if(i>=path.length) return;
    cells[path[i]].appendChild(coin);
    i++;
    setTimeout(step,300);
  }
  step();
}

// ===== TURN SWITCH =====
function switchTurn(){
  turn = turn==="red"?"blue":"red";
  document.getElementById("turn").innerText = turn.toUpperCase()+" TURN";
}
</script>

</body>
</html>
