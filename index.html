<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Kamat Studio - Kaude</title>
  <style>
    :root { --bg: #fff5e6; --board: #3e2723; --inner: #e8f5e9; --wait: #a5d6a7; --gold: #ffd700; }
    body { text-align: center; font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; overflow: hidden; touch-action: manipulation; }
    
    /* Boot Screen */
    #boot-screen { position: fixed; inset: 0; background: #000; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 5000; transition: opacity 0.8s ease; }
    #boot-screen img { width: 220px; height: auto; margin-bottom: 20px; }
    
    #game-container { padding: 5px; display: none; height: 100vh; }
    
    /* Board Styling */
    .board { display: grid; grid-template-columns: repeat(5, 1fr); width: 96vw; height: 96vw; max-width: 420px; max-height: 420px; margin: 10px auto; border: 4px solid var(--board); background: #FFFDD0; }
    
    .cell { 
        border: 1px solid rgba(62, 39, 35, 0.2); 
        position: relative; 
        display: flex; 
        flex-wrap: wrap; 
        align-content: center; 
        justify-content: center; 
        padding: 2px; 
        box-sizing: border-box; 
        gap: 2px;
    }
    
    .inner-layer { background-color: var(--inner) !important; }
    .waiting-box { background-color: var(--wait) !important; border: 2px solid #2e7d32 !important; }
    .win-block { background-color: var(--gold) !important; border: 2px double var(--board); }
    .safe { background-image: linear-gradient(45deg, transparent 48%, #3e2723 50%, transparent 52%), linear-gradient(-45deg, transparent 48%, #3e2723 50%, transparent 52%); }

    /* Tokens */
    .token { 
        width: 15px; height: 15px; 
        border-radius: 50%; border: 1.2px solid #000; 
        transition: transform 0.3s ease; cursor: pointer; 
        box-shadow: 0 1px 2px rgba(0,0,0,0.4); 
    }
    .red-t { background: #ff4444; } .blue-t { background: #2288ff; } .green-t { background: #00aa00; } .yellow-t { background: #ffcc00; }
    
    /* Friendly Message Overlay */
    #msg-overlay { 
        position: fixed; top: 25%; left: 50%; transform: translateX(-50%); 
        background: white; color: #3e2723; padding: 20px; border-radius: 20px; 
        z-index: 4000; display: none; border: 4px solid #d32f2f; 
        font-weight: bold; width: 85%; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        animation: slideIn 0.4s ease-out;
    }
    @keyframes slideIn { from { top: 10%; opacity: 0; } to { top: 25%; opacity: 1; } }

    .status-bar { display: flex; justify-content: space-around; align-items: center; margin: 5px; }
    
    /* Toss Button with Bonus Glow */
    .turn-btn { 
        padding: 12px 35px; background: #d32f2f; color: white; border: none; 
        border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 1.1rem; 
        box-shadow: 0 4px #9a1a1a; transition: all 0.3s;
    }
    .turn-btn:active { transform: translateY(2px); box-shadow: 0 2px #9a1a1a; }
    .bonus-glow { animation: glow 1s infinite alternate; box-shadow: 0 0 15px #ffcc00; border: 2px solid #ffcc00; }
    @keyframes glow { from { transform: scale(1); } to { transform: scale(1.05); } }
  </style>
</head>
<body>

  <div id="boot-screen">
    <img src="1000116381.png" alt="Kamat Studio Logo">
    <h2 style="color:white; letter-spacing:4px; font-weight: 200;">KAMAT STUDIO</h2>
  </div>

  <div id="msg-overlay"></div>

  <div id="game-container">
    <div class="status-bar">
        <div id="p-tag" style="padding: 8px 18px; border-radius: 20px; color: white; font-weight: bold;"></div>
        <div id="roll-text" style="font-size: 1.4rem; font-weight: bold;">Roll: 0</div>
    </div>
    <button id="tossBtn" class="turn-btn" onclick="throwKaude()">TOSS</button>
    <div class="board" id="gameBoard"></div>
  </div>

  <script>
    const outerLoop = [2, 1, 0, 5, 10, 15, 20, 21, 22, 23, 24, 19, 14, 9, 4, 3];
    const starts = [2, 22, 10, 14];
    const names = ['Red', 'Blue', 'Green', 'Yellow'];
    let players = [], turnIdx = 0, rollValue = 0;

    function init() {
      for(let i=0; i<4; i++) {
        players.push({
          name: names[i], color: names[i].toLowerCase(), start: starts[i],
          hasKill: false, tokens: [0,0,0,0], path: generatePath(starts[i], i)
        });
      }
      renderBoard();
      updateUI();
    }

    function generatePath(start, pIdx) {
      let p = [];
      let sIdx = outerLoop.indexOf(start);
      for(let i=0; i<16; i++) p.push(outerLoop[(sIdx + i) % 16]);
      const inners = [[7,6,11,16,17,18,13,8], [17,18,13,8,7,6,11,16], [11,16,17,18,13,8,7,6], [13,8,7,6,11,16,17,18]];
      p.push(...inners[pIdx], 12);
      return p;
    }

    function renderBoard() {
      const b = document.getElementById('gameBoard');
      b.innerHTML = '';
      for(let i=0; i<25; i++) {
        let d = document.createElement('div');
        d.className = 'cell'; d.id = 'cell-' + i;
        if([2,10,14,22,12].includes(i)) d.classList.add('safe');
        if([6,7,8,11,13,16,17,18].includes(i)) d.classList.add('inner-layer');
        if([7,11,13,17].includes(i)) d.classList.add('waiting-box');
        if(i===12) d.classList.add('win-block');
        b.appendChild(d);
      }
      players.forEach((p, pi) => {
        p.tokens.forEach((pos, ti) => {
          let t = document.createElement('div');
          t.className = `token ${p.color}-t`;
          t.id = `t-${pi}-${ti}`;
          t.onclick = () => handleMove(pi, ti);
          document.getElementById('cell-' + p.path[pos]).appendChild(t);
        });
      });
    }

    function showFriendlyMsg(txt) {
      const ov = document.getElementById('msg-overlay');
      ov.innerHTML = txt;
      ov.style.display = 'block';
      setTimeout(() => { ov.style.display = 'none'; }, 3500);
    }

    function throwKaude() {
      let raw = 0;
      for(let i=0; i<4; i++) if(Math.random() > 0.5) raw++;
      rollValue = (raw === 0) ? 8 : raw;
      document.getElementById('roll-text').innerText = "Roll: " + rollValue;
      document.getElementById('tossBtn').disabled = true;
      document.getElementById('tossBtn').classList.remove('bonus-glow');
    }

    function handleMove(pi, ti) {
      if(pi !== turnIdx || rollValue === 0) return;
      let p = players[pi];
      let currentPos = p.tokens[ti];
      let nextPos = currentPos + rollValue;

      // Friendly Warning: Only if they haven't killed anyone yet
      if (nextPos >= 11 && nextPos < 15 && !p.hasKill) {
        showFriendlyMsg(`Hey <b>${p.name}</b>, you haven't killed a player yet. You would be locked later if you don't kill any! üîí`);
      }

      // Lock Logic
      if (currentPos <= 15 && nextPos > 15 && !p.hasKill) {
        showFriendlyMsg(`Sorry <b>${p.name}</b>, the gate is locked! You need a kill to enter the inner ring. ‚öîÔ∏è`);
        return;
      }

      if(nextPos < p.path.length) {
        let targetCell = p.path[nextPos];
        
        // Kill Logic
        if(![2,10,14,22,12].includes(targetCell)) {
            players.forEach((opp, oi) => {
                if(oi !== pi) {
                    opp.tokens.forEach((opos, oti) => {
                        if(opp.path[opos] === targetCell) {
                            opp.tokens[oti] = 0;
                            p.hasKill = true;
                            document.getElementById('cell-' + opp.path[0]).appendChild(document.getElementById(`t-${oi}-${oti}`));
                            showFriendlyMsg(`Great job <b>${p.name}</b>! You captured <b>${opp.name}</b>. The gate is now open! üîì`);
                        }
                    });
                }
            });
        }

        p.tokens[ti] = nextPos;
        document.getElementById('cell-' + targetCell).appendChild(document.getElementById(`t-${pi}-${ti}`));
        
        if(targetCell === 12) document.getElementById(`t-${pi}-${ti}`).style.display = 'none';

        if(rollValue === 4 || rollValue === 8) {
            rollValue = 0; 
            document.getElementById('tossBtn').disabled = false;
            document.getElementById('tossBtn').classList.add('bonus-glow');
        } else {
            turnIdx = (turnIdx + 1) % 4;
            rollValue = 0; 
            document.getElementById('tossBtn').disabled = false;
            updateUI();
        }
      }
    }

    function updateUI() {
      const p = players[turnIdx];
      const tag = document.getElementById('p-tag');
      tag.innerText = p.name.toUpperCase() + (p.hasKill ? " ‚öîÔ∏è" : " üîí");
      tag.style.background = p.color === 'yellow' ? '#ccaa00' : p.color;
      document.getElementById('roll-text').innerText = "Roll: 0";
    }

    window.onload = () => {
      setTimeout(() => {
        document.getElementById('boot-screen').style.opacity = '0';
        setTimeout(() => {
          document.getElementById('boot-screen').style.display = 'none';
          document.getElementById('game-container').style.display = 'block';
          init();
        }, 800);
      }, 2500);
    };
  </script>
</body>
</html>
